#!/bin/bash

# ==========================================
# CONFIGURAÃ‡Ã•ES AVANÃ‡ADAS DO TERMINAL
# ==========================================

# ====== HISTÃ“RICO MELHORADO ======
export HISTSIZE=10000
export HISTFILESIZE=10000
export HISTCONTROL=ignoreboth:erasedups
export HISTIGNORE="ls:cd:pwd:exit:date:* --help"

# Salva o histÃ³rico imediatamente
shopt -s histappend
PROMPT_COMMAND="history -a; $PROMPT_COMMAND"

# ====== NAVEGAÃ‡ÃƒO MELHORADA ======
# CorreÃ§Ã£o automÃ¡tica de typos em cd
shopt -s cdspell
shopt -s dirspell

# Completa hostnames
shopt -s hostcomplete

# Expand aliases
shopt -s expand_aliases

# ====== AUTOCOMPLETAR PERSONALIZADO ======

# Autocompletar para comandos Python
complete -W "$(python -c 'import keyword; print(" ".join(keyword.kwlist))' 2>/dev/null)" python
complete -W "$(python3 -c 'import keyword; print(" ".join(keyword.kwlist))' 2>/dev/null)" python3

# Autocompletar para pip
if command -v pip >/dev/null 2>&1; then
    eval "$(pip completion --bash)" 2>/dev/null
fi

# Autocompletar para git (se disponÃ­vel)
if [ -f /usr/share/bash-completion/completions/git ]; then
    source /usr/share/bash-completion/completions/git
fi

# ====== ALIASES ÃšTEIS ======
alias ll='ls -alF'
alias la='ls -A'
alias l='ls -CF'
alias ..='cd ..'
alias ...='cd ../..'
alias grep='grep --color=auto'
alias fgrep='fgrep --color=auto'
alias egrep='egrep --color=auto'

# Aliases para Python
alias py='python'
alias py3='python3'
alias pip3='python3 -m pip'
alias venv-activate='source venv/bin/activate'

# ====== FUNÃ‡Ã•ES ÃšTEIS ======

# FunÃ§Ã£o para criar e ativar ambiente virtual
mkvenv() {
    python3 -m venv "$1" && source "$1/bin/activate"
}

# FunÃ§Ã£o para buscar arquivos rapidamente
ff() {
    find . -name "*$1*" -type f 2>/dev/null
}

# FunÃ§Ã£o para buscar em arquivos
search() {
    grep -r -n --color=auto "$1" . 2>/dev/null
}

echo "ğŸš€ ConfiguraÃ§Ãµes avanÃ§adas do terminal carregadas!"
echo "ğŸ’¡ Dicas:"
echo "   - Use TAB para autocompletar"
echo "   - Use â†‘/â†“ para buscar no histÃ³rico"
echo "   - Use 'ff nome' para buscar arquivos"
echo "   - Use 'search texto' para buscar em arquivos"